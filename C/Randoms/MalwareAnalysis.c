#include <stdio.h>
#include <stdlib.h>

int* simulate(int entries[], int length) 
{
    // Waiting to be implemented
    int counter = 0, TL = 0, TR = 0;
    int *Indexes = calloc(length, sizeof(int));
    int IndexesLen = 0;
    int *result  = calloc(length, sizeof(int));
    
    for(counter = 0; counter < length; counter++)
    {
        result[counter] = entries[counter];
    }

    for(counter = 0; counter < length; counter++)
    {
        TL = entries[counter-3]; 
        TR = entries[counter+4];

        if (counter <= (length-1-4) && counter >= 3)
        {
            /*There is TR & TL, compare to both*/
            if (TL >= entries[counter] || TR >= entries[counter])
            {
                Indexes[IndexesLen++] = counter;
            }
            
        }
        else if (counter >= 3)
        {
            /*There is TL*/
            if (TL >= entries[counter])
            {
                Indexes[IndexesLen++] = counter;
            }
            
        }
        else if (counter <= (length-1-4))
        {
            /*There is TR*/
            if (TR >= entries[counter])
            {
                Indexes[IndexesLen++] = counter;
            }   
        }
    }
    
    for (counter = 0; counter < IndexesLen; ++counter)
    {
        result[Indexes[counter]] = 0;
    }
    
    return result;
}

#ifndef RunTests
int main()
{
    int records[] = { 1, 2, 0, 5, 0, 2, 4, 3, 3, 3 };
    int length = sizeof(records)/sizeof(int);
  
    int *result = simulate(records, length);
    for (int i = 0; i < length; i++)
        printf("%d, ", result[i]); // should print 1, 0, 0, 5, 0, 0, 0, 3, 3, 0,
    
    free(result);
}
#endif